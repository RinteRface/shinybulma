var bulmaSteps=function(){'use strict';const a=['click','touchstart'];class b{constructor(a=null,b={}){this.options=Object.assign({},{selector:'.step-item',selector_content:'.step-content',previous_selector:'[data-nav="previous"]',next_selector:'[data-nav="next"]',active_class:'is-active',completed_class:'is-completed',beforeNext:null,onShow:null,onFinish:null,onError:null},b),this.element=a,this.steps=a.querySelectorAll(this.options.selector),this.contents=a.querySelectorAll(this.options.selector_content),this.previous_btn=a.querySelector(this.options.previous_selector),this.next_btn=a.querySelector(this.options.next_selector),this.init()}init(){for(var a,b=0;b<this.steps.length;b++)a=this.steps[b],a.setAttribute('data-step-id',b);this.bind(),this.start()}bind(){var b=this;null!=this.previous_btn&&a.forEach((a)=>{this.previous_btn.addEventListener(a,function(a){a.preventDefault(),a.target.getAttribute('disabled')||b.previous_step()})}),null!=this.next_btn&&a.forEach((a)=>{this.next_btn.addEventListener(a,function(a){a.preventDefault(),a.target.getAttribute('disabled')||b.next_step()})})}start(){this.activate_step(0),this.updateActions(this.steps[0])}get_current_step_id(){for(var a,b=0;b<this.steps.length;b++)if(a=this.steps[b],a.classList.contains(this.options.active_class))return parseInt(a.getAttribute('data-step-id'));return null}updateActions(a){var b=parseInt(a.getAttribute('data-step-id'));0==b?(null!=this.previous_btn&&this.previous_btn.setAttribute('disabled','disabled'),null!=this.next_btn&&this.next_btn.removeAttribute('disabled','disabled')):b==this.steps.length-1?(null!=this.previous_btn&&this.previous_btn.removeAttribute('disabled','disabled'),null!=this.next_btn&&this.next_btn.setAttribute('disabled','disabled')):(null!=this.previous_btn&&this.previous_btn.removeAttribute('disabled','disabled'),null!=this.next_btn&&this.next_btn.removeAttribute('disabled','disabled'))}next_step(){var a=this.get_current_step_id();if(null!=a){var b=a+1,c=[];if('undefined'!=typeof this.options.beforeNext&&null!=this.options.beforeNext&&this.options.beforeNext&&(c=this.options.beforeNext(a)),'undefined'==typeof c&&(c=[]),0<c.length){for(var d=0;d<c.length;d++)'undefined'!=typeof this.options.onError&&null!=this.options.onError&&this.options.onError&&this.options.onError(c[d]);return}b>=this.steps.length?('undefined'!=typeof this.options.onFinish&&null!=this.options.onFinish&&this.options.onFinish&&this.options.onFinish(a),this.deactivate_step(a)):(this.complete_step(a),this.activate_step(b))}}previous_step(){var a=this.get_current_step_id();null==a||(this.uncomplete_step(a-1),this.activate_step(a-1))}activate_step(a){this.updateActions(this.steps[a]);for(var b,c=0;c<this.steps.length;c++)(b=this.steps[c],b!=this.steps[a])&&this.deactivate_step(c);this.steps[a].classList.add(this.options.active_class),'undefined'!=typeof this.contents[a]&&this.contents[a].classList.add(this.options.active_class),'undefined'!=typeof this.options.onShow&&null!=this.options.onShow&&this.options.onShow&&this.options.onShow(a)}complete_step(a){this.steps[a].classList.add(this.options.completed_class)}uncomplete_step(a){this.steps[a].classList.remove(this.options.completed_class)}deactivate_step(a){this.steps[a].classList.remove(this.options.active_class),'undefined'!=typeof this.contents[a]&&this.contents[a].classList.remove(this.options.active_class)}}return document.addEventListener('DOMContentLoaded',function(){var a=document.querySelectorAll('.steps');[].forEach.call(a,(a)=>{new b(a)})}),b}();
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9leHRlbnNpb24uanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6InVDQUFBLEtBQU0sQUFBWSxHQUFHLENBQUMsQUFBTyxRQUFFLEFBQVksQUFBQyxBQUFDLGNBRTdDLEFBQWUsQUFBTSxBQUFXLE9BQUMsQ0FDL0IsQUFBVyxZQUFDLEFBQU8sRUFBRyxBQUFJLEtBQUUsQUFBTyxFQUFHLEFBQUUsR0FBRSxDQUN4QyxBQUFJLEtBQUMsQUFBTyxRQUFHLEFBQU0sT0FBQyxBQUFNLE9BQUMsQUFBRSxHQUFFLENBQy9CLEFBQVUsU0FBRSxBQUFZLGFBQ3hCLEFBQWtCLGlCQUFFLEFBQWUsZ0JBQ25DLEFBQW1CLGtCQUFFLEFBQXVCLHdCQUM1QyxBQUFlLGNBQUUsQUFBbUIsb0JBQ3BDLEFBQWMsYUFBRSxBQUFXLFlBQzNCLEFBQWlCLGdCQUFFLEFBQWMsZUFDakMsQUFBWSxXQUFFLEFBQUksS0FDbEIsQUFBUSxPQUFFLEFBQUksS0FDZCxBQUFVLFNBQUUsQUFBSSxLQUNoQixBQUFTLFFBQUUsQUFBSSxBQUNoQixBQUFFLEFBQU8sQUFBQyxBQUFDLFNBRVosQUFBSSxLQUFDLEFBQU8sQUFBRyxBQUFPLEFBQUMsVUFDdkIsQUFBSSxLQUFDLEFBQUssTUFBRyxBQUFPLEVBQUMsQUFBZ0IsaUJBQUMsQUFBSSxLQUFDLEFBQU8sUUFBQyxBQUFRLEFBQUMsQUFBQyxVQUM3RCxBQUFJLEtBQUMsQUFBUSxTQUFHLEFBQU8sRUFBQyxBQUFnQixpQkFBQyxBQUFJLEtBQUMsQUFBTyxRQUFDLEFBQWdCLEFBQUMsQUFBQyxrQkFDeEUsQUFBSSxLQUFDLEFBQVksYUFBRyxBQUFPLEVBQUMsQUFBYSxjQUFDLEFBQUksS0FBQyxBQUFPLFFBQUMsQUFBaUIsQUFBQyxBQUFDLG1CQUMxRSxBQUFJLEtBQUMsQUFBUSxTQUFHLEFBQU8sRUFBQyxBQUFhLGNBQUMsQUFBSSxLQUFDLEFBQU8sUUFBQyxBQUFhLEFBQUMsQUFBQyxlQUVsRSxBQUFJLEtBQUMsQUFBSSxBQUFFLEFBQUMsTUFDYixDQUVELEFBQUksTUFBRyxDQUNMLElBQUssTUFBSSxBQUFDLEVBQUcsQUFBQyxFQUFFLEFBQUMsRUFBRyxBQUFJLEtBQUMsQUFBSyxNQUFDLEFBQU0sT0FBRSxBQUFDLEFBQUUsQUFBRSxBQUMxQyxBQUFJLEFBQUksTUFBRyxBQUFJLEtBQUMsQUFBSyxBQUFDLEFBQUMsQUFBQyxBQUFDLFNBRXpCLEFBQUksRUFBQyxBQUFZLGFBQUMsQUFBYyxBQUFFLEFBQUMsQUFBQyxBQUFDLEFBQ3RDLGtCQUVELEFBQUksS0FBQyxBQUFJLEFBQUUsQUFBQyxPQUVaLEFBQUksS0FBQyxBQUFLLEFBQUUsQUFBQyxPQUNkLENBRUQsQUFBSSxNQUFHLENBQ0wsR0FBSSxBQUFLLEdBQUcsQUFBSSxBQUFDLEFBRWpCLEtBQXlCLEFBQUksQUFBRSxJQUEzQixBQUFJLE9BQUMsQUFBWSxjQUNuQixBQUFZLEVBQUMsQUFBTyxRQUFDLEFBQUMsQUFBSyxLQUFLLENBQzlCLEFBQUksS0FBQyxBQUFZLGFBQUMsQUFBZ0IsQUFBQyxBQUFLLG1CQUFFLEFBQVMsQUFBQyxXQUFFLENBQ3BELEFBQUMsRUFBQyxBQUFjLEFBQUUsQUFBQyxBQUNuQixBQUFJLGlCQUFDLEFBQUMsRUFBQyxBQUFNLE9BQUMsQUFBWSxhQUFDLEFBQVUsQUFBQyxBQUFFLGFBQ3RDLEFBQUssRUFBQyxBQUFhLEFBQUUsQUFBQyxBQUN2QixlQUNGLEFBQUMsQUFBQyxFQUNKLEFBQUMsQUFBQyxBQUNKLEFBRUQsR0FBcUIsQUFBSSxBQUFFLElBQXZCLEFBQUksT0FBQyxBQUFRLFVBQ2YsQUFBWSxFQUFDLEFBQU8sUUFBQyxBQUFDLEFBQUssS0FBSyxDQUM5QixBQUFJLEtBQUMsQUFBUSxTQUFDLEFBQWdCLEFBQUMsQUFBSyxtQkFBRSxBQUFTLEFBQUMsV0FBRSxDQUNoRCxBQUFDLEVBQUMsQUFBYyxBQUFFLEFBQUMsQUFDbkIsQUFBSSxpQkFBQyxBQUFDLEVBQUMsQUFBTSxPQUFDLEFBQVksYUFBQyxBQUFVLEFBQUMsQUFBRSxhQUN0QyxBQUFLLEVBQUMsQUFBUyxBQUFFLEFBQUMsQUFDbkIsV0FDRixBQUFDLEFBQUMsRUFDSixBQUFDLEFBQUMsQUFDSixFQUNGLENBRUQsQUFBSyxPQUFHLENBQ04sQUFBSSxLQUFDLEFBQWEsY0FBQyxBQUFDLEFBQUMsQUFBQyxHQUN0QixBQUFJLEtBQUMsQUFBYSxjQUFDLEFBQUksS0FBQyxBQUFLLE1BQUMsQUFBQyxBQUFDLEFBQUMsQUFBQyxHQUNuQyxDQUVELEFBQW1CLHFCQUFHLENBQ3BCLElBQUssTUFBSSxBQUFDLEVBQUcsQUFBQyxFQUFFLEFBQUMsRUFBRyxBQUFJLEtBQUMsQUFBSyxNQUFDLEFBQU0sT0FBRSxBQUFDLEFBQUUsQUFBRSxBQUMxQyxBQUFJLEFBQUksSUFFUixLQUZXLEFBQUksS0FBQyxBQUFLLEFBQUMsQUFBQyxBQUFDLEFBQUMsU0FFckIsQUFBSSxFQUFDLEFBQVMsVUFBQyxBQUFRLFNBQUMsQUFBSSxLQUFDLEFBQU8sUUFBQyxBQUFZLEFBQUMsQUFBRSxjQUN0RCxNQUFPLEFBQVEsVUFBQyxBQUFJLEVBQUMsQUFBWSxhQUFDLEFBQWMsQUFBQyxBQUFDLEFBQUMsQUFDcEQsQUFDRixpQkFFRCxNQUFPLEFBQUksQUFBQyxLQUNiLENBRUQsQUFBYSxBQUFDLEFBQUksZ0JBQUUsQ0FDbEIsR0FBSSxBQUFNLEdBQUcsQUFBUSxTQUFDLEFBQUksRUFBQyxBQUFZLGFBQUMsQUFBYyxBQUFDLEFBQUMsQUFBQyxBQUN6RCxpQkFBYyxBQUFDLEFBQUUsQUFDZixDQURFLEFBQU0sS0FDaUIsQUFBSSxBQUFFLElBQTNCLEFBQUksT0FBQyxBQUFZLGNBQ25CLEFBQUksS0FBQyxBQUFZLGFBQUMsQUFBWSxhQUFDLEFBQVUsV0FBRSxBQUFVLEFBQUMsQUFBQyxBQUN4RCxBQUNELFlBQXFCLEFBQUksQUFBRSxJQUF2QixBQUFJLE9BQUMsQUFBUSxVQUNmLEFBQUksS0FBQyxBQUFRLFNBQUMsQUFBZSxnQkFBQyxBQUFVLFdBQUUsQUFBVSxBQUFDLEFBQUMsQUFDdkQsQUFDRixBQUFNLGFBQUksQUFBTSxHQUFLLEFBQUksS0FBQyxBQUFLLE1BQUMsQUFBTSxPQUFHLEFBQUMsQUFBQyxBQUFFLEFBQzVDLEdBQXlCLEFBQUksQUFBRSxJQUEzQixBQUFJLE9BQUMsQUFBWSxjQUNuQixBQUFJLEtBQUMsQUFBWSxhQUFDLEFBQWUsZ0JBQUMsQUFBVSxXQUFFLEFBQVUsQUFBQyxBQUFDLEFBQzNELEFBQ0QsWUFBcUIsQUFBSSxBQUFFLElBQXZCLEFBQUksT0FBQyxBQUFRLFVBQ2YsQUFBSSxLQUFDLEFBQVEsU0FBQyxBQUFZLGFBQUMsQUFBVSxXQUFFLEFBQVUsQUFBQyxBQUFDLEFBQ3BELEFBQ0YsQUFBTSxBQUNMLGNBQXlCLEFBQUksQUFBRSxJQUEzQixBQUFJLE9BQUMsQUFBWSxjQUNuQixBQUFJLEtBQUMsQUFBWSxhQUFDLEFBQWUsZ0JBQUMsQUFBVSxXQUFFLEFBQVUsQUFBQyxBQUFDLEFBQzNELEFBQ0QsWUFBcUIsQUFBSSxBQUFFLElBQXZCLEFBQUksT0FBQyxBQUFRLFVBQ2YsQUFBSSxLQUFDLEFBQVEsU0FBQyxBQUFlLGdCQUFDLEFBQVUsV0FBRSxBQUFVLEFBQUMsQUFBQyxBQUN2RCxBQUNGLFlBQ0YsQ0FFRCxBQUFTLFdBQUcsQ0FDVixHQUFJLEFBQVUsR0FBRyxBQUFJLEtBQUMsQUFBbUIsQUFBRSxBQUFDLHNCQUU1QyxHQUFrQixBQUFJLEFBQUUsQUFDdEIsQUFBTyxBQUNSLElBRkcsQUFBVSxLQUlkLEdBQUksQUFBTyxHQUFHLEFBQVUsRUFBRyxBQUFDLEVBQzFCLEFBQU0sRUFBRyxBQUFFLEFBQUMsQUFFZCxHQVFBLEdBUnNDLEFBQVcsV0FBN0MsUUFBTyxBQUFJLE1BQUMsQUFBTyxRQUFDLEFBQVUsWUFBOEMsQUFBSSxJQUEvQixBQUFJLE9BQUMsQUFBTyxRQUFDLEFBQVUsWUFBWSxBQUFJLEtBQUMsQUFBTyxRQUFDLEFBQVUsQUFBRSxhQUMvRyxBQUFNLEVBQUcsQUFBSSxLQUFDLEFBQU8sUUFBQyxBQUFVLEFBQUMsQUFBVSxBQUFDLEFBQUMsQUFDOUMsQUFFRCxlQUFxQixBQUFXLEFBQUUsV0FBOUIsQUFBTyxBQUFNLGFBQ2YsQUFBTSxFQUFHLEFBQUUsQUFBQyxBQUNiLElBRW1CLEFBQUMsQ0FBakIsQUFBTSxHQUFDLEFBQU0sT0FBTSxDQUNyQixJQUFLLEdBQUksQUFBQyxHQUFHLEFBQUMsRUFBRSxBQUFDLEVBQUcsQUFBTSxFQUFDLEFBQU0sT0FBRSxBQUFDLEFBQUUsQUFBRSxBQUN0QyxJQUFtQyxBQUFXLFdBQTFDLFFBQU8sQUFBSSxNQUFDLEFBQU8sUUFBQyxBQUFPLFNBQTJDLEFBQUksSUFBNUIsQUFBSSxPQUFDLEFBQU8sUUFBQyxBQUFPLFNBQVksQUFBSSxLQUFDLEFBQU8sUUFBQyxBQUFPLEFBQUUsU0FDdEcsQUFBSSxLQUFDLEFBQU8sUUFBQyxBQUFPLFFBQUMsQUFBTSxBQUFDLEFBQUMsQUFBQyxBQUFDLEFBQUMsQUFDakMsQUFDRixNQUVELEFBQU8sTUFDUixBQUVELENBQUksQUFBTyxHQUFJLEFBQUksS0FBQyxBQUFLLE1BQUMsQUFBTSxBQUFFLEFBQ2hDLFFBQW9DLEFBQVcsV0FBM0MsUUFBTyxBQUFJLE1BQUMsQUFBTyxRQUFDLEFBQVEsVUFBNEMsQUFBSSxJQUE3QixBQUFJLE9BQUMsQUFBTyxRQUFDLEFBQVEsVUFBWSxBQUFJLEtBQUMsQUFBTyxRQUFDLEFBQVEsQUFBRSxVQUN6RyxBQUFJLEtBQUMsQUFBTyxRQUFDLEFBQVEsQUFBQyxBQUFVLEFBQUMsQUFBQyxBQUNuQyxZQUNELEFBQUksS0FBQyxBQUFlLEFBQUMsQUFBVSxBQUFDLEFBQUMsQUFDbEMsQUFBTSxxQkFDTCxBQUFJLEtBQUMsQUFBYSxBQUFDLEFBQVUsQUFBQyxBQUFDLGlCQUMvQixBQUFJLEtBQUMsQUFBYSxBQUFDLEFBQU8sQUFBQyxBQUFDLEFBQzdCLGtCQUNGLENBRUQsQUFBYSxlQUFHLENBQ2QsR0FBSSxBQUFVLEdBQUcsQUFBSSxLQUFDLEFBQW1CLEFBQUUsQUFBQyxBQUM1QyxzQkFBa0IsQUFBSSxBQUFFLEFBQ3RCLEFBQU8sQUFDUixJQUZHLEFBQVUsTUFJZCxBQUFJLEtBQUMsQUFBZSxnQkFBQyxBQUFVLEVBQUcsQUFBQyxBQUFDLEFBQUMsR0FDckMsQUFBSSxLQUFDLEFBQWEsY0FBQyxBQUFVLEVBQUcsQUFBQyxBQUFDLEFBQUMsR0FDcEMsQ0FNRCxBQUFhLEFBQUMsQUFBTyxnQkFBRSxDQUNyQixBQUFJLEtBQUMsQUFBYSxjQUFDLEFBQUksS0FBQyxBQUFLLEFBQUMsQUFBTyxBQUFDLEFBQUMsQUFBQyxVQUV4QyxJQUFLLE1BQUksQUFBQyxFQUFHLEFBQUMsRUFBRSxBQUFDLEVBQUcsQUFBSSxLQUFDLEFBQUssTUFBQyxBQUFNLE9BQUUsQUFBQyxBQUFFLEFBQUUsQUFDMUMsQUFBSSxBQUFLLE9BQUcsQUFBSSxLQUFDLEFBQUssQUFBQyxBQUFDLEFBQUMsQUFBQyxBQUUxQixTQUFJLEFBQUssR0FBSSxBQUFJLEtBQUMsQUFBSyxBQUFDLEFBQU8sQUFBQyxBQUFFLEFBQ2hDLEFBQVMsQUFDVixXQUVELEFBQUksS0FBQyxBQUFlLEFBQUMsQUFBQyxBQUFDLEFBQUMsQUFDekIsbUJBRUQsQUFBSSxLQUFDLEFBQUssQUFBQyxBQUFPLEFBQUMsU0FBQyxBQUFTLFVBQUMsQUFBRyxJQUFDLEFBQUksS0FBQyxBQUFPLFFBQUMsQUFBWSxBQUFDLEFBQUMsQUFDN0QsY0FBc0MsQUFBVyxBQUFFLFdBQS9DLFFBQU8sQUFBSSxNQUFDLEFBQVEsQUFBQyxBQUFPLEFBQUMsYUFDL0IsQUFBSSxLQUFDLEFBQVEsQUFBQyxBQUFPLEFBQUMsWUFBQyxBQUFTLFVBQUMsQUFBRyxJQUFDLEFBQUksS0FBQyxBQUFPLFFBQUMsQUFBWSxBQUFDLEFBQUMsQUFDakUsQUFFRCxjQUFrQyxBQUFXLFdBQXpDLFFBQU8sQUFBSSxNQUFDLEFBQU8sUUFBQyxBQUFNLFFBQTBDLEFBQUksSUFBM0IsQUFBSSxPQUFDLEFBQU8sUUFBQyxBQUFNLFFBQVksQUFBSSxLQUFDLEFBQU8sUUFBQyxBQUFNLEFBQUUsUUFDbkcsQUFBSSxLQUFDLEFBQU8sUUFBQyxBQUFNLEFBQUMsQUFBTyxBQUFDLEFBQUMsQUFDOUIsU0FDRixDQUVELEFBQWEsQUFBQyxBQUFPLGdCQUFFLENBQ3JCLEFBQUksS0FBQyxBQUFLLEFBQUMsQUFBTyxBQUFDLFNBQUMsQUFBUyxVQUFDLEFBQUcsSUFBQyxBQUFJLEtBQUMsQUFBTyxRQUFDLEFBQWUsQUFBQyxBQUFDLGdCQUNqRSxDQUVELEFBQWUsQUFBQyxBQUFPLGtCQUFFLENBQ3ZCLEFBQUksS0FBQyxBQUFLLEFBQUMsQUFBTyxBQUFDLFNBQUMsQUFBUyxVQUFDLEFBQU0sT0FBQyxBQUFJLEtBQUMsQUFBTyxRQUFDLEFBQWUsQUFBQyxBQUFDLGdCQUNwRSxDQUVELEFBQWUsQUFBQyxBQUFPLGtCQUFFLENBQ3ZCLEFBQUksS0FBQyxBQUFLLEFBQUMsQUFBTyxBQUFDLFNBQUMsQUFBUyxVQUFDLEFBQU0sT0FBQyxBQUFJLEtBQUMsQUFBTyxRQUFDLEFBQVksQUFBQyxBQUFDLEFBQ2hFLGNBQXNDLEFBQVcsQUFBRSxXQUEvQyxRQUFPLEFBQUksTUFBQyxBQUFRLEFBQUMsQUFBTyxBQUFDLGFBQy9CLEFBQUksS0FBQyxBQUFRLEFBQUMsQUFBTyxBQUFDLFlBQUMsQUFBUyxVQUFDLEFBQU0sT0FBQyxBQUFJLEtBQUMsQUFBTyxRQUFDLEFBQVksQUFBQyxBQUFDLEFBQ3BFLGFBQ0YsQUFDRixRQUVELEFBQVEsVUFBQyxBQUFnQixpQkFBQyxBQUFrQixtQkFBRSxVQUFXLENBQ3ZELEdBQUksQUFBZSxHQUFHLEFBQVEsU0FBQyxBQUFnQixpQkFBQyxBQUFRLEFBQUMsQUFBQyxVQUMxRCxBQUFFLEdBQUMsQUFBTyxRQUFDLEFBQUksQUFBQyxBQUFlLE9BQUUsQUFBQyxBQUFjLEtBQUssQUFDbkQsQUFBSSxBQUFXLENBQUcsQUFBSSxBQUFXLEFBQUMsQUFBYyxBQUFDLEFBQUMsUUFDbkQsQUFBQyxBQUFDLEVBQ0osQUFBQyxBQUFDIiwiZmlsZSI6ImJ1bG1hLXN0ZXBzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbImNvbnN0IE1PVVNFX0VWRU5UUyA9IFsnY2xpY2snLCAndG91Y2hzdGFydCddO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBTdGVwc1dpemFyZCB7XG4gIGNvbnN0cnVjdG9yKGVsZW1lbnQgPSBudWxsLCBvcHRpb25zID0ge30pIHtcbiAgICB0aGlzLm9wdGlvbnMgPSBPYmplY3QuYXNzaWduKHt9LCB7XG4gICAgICAnc2VsZWN0b3InOiAnLnN0ZXAtaXRlbScsXG4gICAgICAnc2VsZWN0b3JfY29udGVudCc6ICcuc3RlcC1jb250ZW50JyxcbiAgICAgICdwcmV2aW91c19zZWxlY3Rvcic6ICdbZGF0YS1uYXY9XCJwcmV2aW91c1wiXScsXG4gICAgICAnbmV4dF9zZWxlY3Rvcic6ICdbZGF0YS1uYXY9XCJuZXh0XCJdJyxcbiAgICAgICdhY3RpdmVfY2xhc3MnOiAnaXMtYWN0aXZlJyxcbiAgICAgICdjb21wbGV0ZWRfY2xhc3MnOiAnaXMtY29tcGxldGVkJyxcbiAgICAgICdiZWZvcmVOZXh0JzogbnVsbCxcbiAgICAgICdvblNob3cnOiBudWxsLFxuICAgICAgJ29uRmluaXNoJzogbnVsbCxcbiAgICAgICdvbkVycm9yJzogbnVsbFxuICAgIH0sIG9wdGlvbnMpO1xuXG4gICAgdGhpcy5lbGVtZW50ID0gZWxlbWVudDtcbiAgICB0aGlzLnN0ZXBzID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMub3B0aW9ucy5zZWxlY3Rvcik7XG4gICAgdGhpcy5jb250ZW50cyA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbCh0aGlzLm9wdGlvbnMuc2VsZWN0b3JfY29udGVudCk7XG4gICAgdGhpcy5wcmV2aW91c19idG4gPSBlbGVtZW50LnF1ZXJ5U2VsZWN0b3IodGhpcy5vcHRpb25zLnByZXZpb3VzX3NlbGVjdG9yKTtcbiAgICB0aGlzLm5leHRfYnRuID0gZWxlbWVudC5xdWVyeVNlbGVjdG9yKHRoaXMub3B0aW9ucy5uZXh0X3NlbGVjdG9yKTtcblxuICAgIHRoaXMuaW5pdCgpO1xuICB9XG5cbiAgaW5pdCgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzdGVwID0gdGhpcy5zdGVwc1tpXTtcblxuICAgICAgc3RlcC5zZXRBdHRyaWJ1dGUoJ2RhdGEtc3RlcC1pZCcsIGkpO1xuICAgIH1cblxuICAgIHRoaXMuYmluZCgpO1xuXG4gICAgdGhpcy5zdGFydCgpO1xuICB9XG5cbiAgYmluZCgpIHtcbiAgICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gICAgaWYgKHRoaXMucHJldmlvdXNfYnRuICE9IG51bGwpIHtcbiAgICAgIE1PVVNFX0VWRU5UUy5mb3JFYWNoKChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLnByZXZpb3VzX2J0bi5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmdW5jdGlvbihlKSB7XG4gICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgIGlmICghZS50YXJnZXQuZ2V0QXR0cmlidXRlKCdkaXNhYmxlZCcpKSB7XG4gICAgICAgICAgICBfdGhpcy5wcmV2aW91c19zdGVwKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9KTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLm5leHRfYnRuICE9IG51bGwpIHtcbiAgICAgIE1PVVNFX0VWRU5UUy5mb3JFYWNoKChldmVudCkgPT4ge1xuICAgICAgICB0aGlzLm5leHRfYnRuLmFkZEV2ZW50TGlzdGVuZXIoZXZlbnQsIGZ1bmN0aW9uKGUpIHtcbiAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgICAgaWYgKCFlLnRhcmdldC5nZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJykpIHtcbiAgICAgICAgICAgIF90aGlzLm5leHRfc3RlcCgpO1xuICAgICAgICAgIH1cbiAgICAgICAgfSk7XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBzdGFydCgpIHtcbiAgICB0aGlzLmFjdGl2YXRlX3N0ZXAoMCk7XG4gICAgdGhpcy51cGRhdGVBY3Rpb25zKHRoaXMuc3RlcHNbMF0pO1xuICB9XG5cbiAgZ2V0X2N1cnJlbnRfc3RlcF9pZCgpIHtcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHRoaXMuc3RlcHMubGVuZ3RoOyBpKyspIHtcbiAgICAgIHZhciBzdGVwID0gdGhpcy5zdGVwc1tpXTtcblxuICAgICAgaWYgKHN0ZXAuY2xhc3NMaXN0LmNvbnRhaW5zKHRoaXMub3B0aW9ucy5hY3RpdmVfY2xhc3MpKSB7XG4gICAgICAgIHJldHVybiBwYXJzZUludChzdGVwLmdldEF0dHJpYnV0ZSgnZGF0YS1zdGVwLWlkJykpO1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBudWxsO1xuICB9XG5cbiAgdXBkYXRlQWN0aW9ucyhzdGVwKSB7XG4gICAgdmFyIHN0ZXBJZCA9IHBhcnNlSW50KHN0ZXAuZ2V0QXR0cmlidXRlKCdkYXRhLXN0ZXAtaWQnKSk7XG4gICAgaWYgKHN0ZXBJZCA9PSAwKSB7XG4gICAgICBpZiAodGhpcy5wcmV2aW91c19idG4gIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnByZXZpb3VzX2J0bi5zZXRBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5uZXh0X2J0biAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMubmV4dF9idG4ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSBpZiAoc3RlcElkID09ICh0aGlzLnN0ZXBzLmxlbmd0aCAtIDEpKSB7XG4gICAgICBpZiAodGhpcy5wcmV2aW91c19idG4gIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnByZXZpb3VzX2J0bi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5uZXh0X2J0biAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMubmV4dF9idG4uc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5wcmV2aW91c19idG4gIT0gbnVsbCkge1xuICAgICAgICB0aGlzLnByZXZpb3VzX2J0bi5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJywgJ2Rpc2FibGVkJyk7XG4gICAgICB9XG4gICAgICBpZiAodGhpcy5uZXh0X2J0biAhPSBudWxsKSB7XG4gICAgICAgIHRoaXMubmV4dF9idG4ucmVtb3ZlQXR0cmlidXRlKCdkaXNhYmxlZCcsICdkaXNhYmxlZCcpO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG5leHRfc3RlcCgpIHtcbiAgICB2YXIgY3VycmVudF9pZCA9IHRoaXMuZ2V0X2N1cnJlbnRfc3RlcF9pZCgpO1xuXG4gICAgaWYgKGN1cnJlbnRfaWQgPT0gbnVsbCkge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIHZhciBuZXh0X2lkID0gY3VycmVudF9pZCArIDEsXG4gICAgICBlcnJvcnMgPSBbXTtcblxuICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLmJlZm9yZU5leHQgIT0gJ3VuZGVmaW5lZCcgJiYgdGhpcy5vcHRpb25zLmJlZm9yZU5leHQgIT0gbnVsbCAmJiB0aGlzLm9wdGlvbnMuYmVmb3JlTmV4dCkge1xuICAgICAgZXJyb3JzID0gdGhpcy5vcHRpb25zLmJlZm9yZU5leHQoY3VycmVudF9pZCk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiBlcnJvcnMgPT0gJ3VuZGVmaW5lZCcpIHtcbiAgICAgIGVycm9ycyA9IFtdO1xuICAgIH1cblxuICAgIGlmIChlcnJvcnMubGVuZ3RoID4gMCkge1xuICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBlcnJvcnMubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25FcnJvciAhPSAndW5kZWZpbmVkJyAmJiB0aGlzLm9wdGlvbnMub25FcnJvciAhPSBudWxsICYmIHRoaXMub3B0aW9ucy5vbkVycm9yKSB7XG4gICAgICAgICAgdGhpcy5vcHRpb25zLm9uRXJyb3IoZXJyb3JzW2ldKTtcbiAgICAgICAgfVxuICAgICAgfVxuXG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgaWYgKG5leHRfaWQgPj0gdGhpcy5zdGVwcy5sZW5ndGgpIHtcbiAgICAgIGlmICh0eXBlb2YgdGhpcy5vcHRpb25zLm9uRmluaXNoICE9ICd1bmRlZmluZWQnICYmIHRoaXMub3B0aW9ucy5vbkZpbmlzaCAhPSBudWxsICYmIHRoaXMub3B0aW9ucy5vbkZpbmlzaCkge1xuICAgICAgICB0aGlzLm9wdGlvbnMub25GaW5pc2goY3VycmVudF9pZCk7XG4gICAgICB9XG4gICAgICB0aGlzLmRlYWN0aXZhdGVfc3RlcChjdXJyZW50X2lkKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5jb21wbGV0ZV9zdGVwKGN1cnJlbnRfaWQpO1xuICAgICAgdGhpcy5hY3RpdmF0ZV9zdGVwKG5leHRfaWQpO1xuICAgIH1cbiAgfVxuXG4gIHByZXZpb3VzX3N0ZXAoKSB7XG4gICAgdmFyIGN1cnJlbnRfaWQgPSB0aGlzLmdldF9jdXJyZW50X3N0ZXBfaWQoKTtcbiAgICBpZiAoY3VycmVudF9pZCA9PSBudWxsKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy51bmNvbXBsZXRlX3N0ZXAoY3VycmVudF9pZCAtIDEpO1xuICAgIHRoaXMuYWN0aXZhdGVfc3RlcChjdXJyZW50X2lkIC0gMSk7XG4gIH1cblxuICAvKipcbiAgICogQWN0aXZhdGUgYSBzaW5nbGUgc3RlcCxcbiAgICogd2lsbCBkZWFjdGl2YXRlIGFsbCBvdGhlciBzdGVwcy5cbiAgICovXG4gIGFjdGl2YXRlX3N0ZXAoc3RlcF9pZCkge1xuICAgIHRoaXMudXBkYXRlQWN0aW9ucyh0aGlzLnN0ZXBzW3N0ZXBfaWRdKTtcblxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5zdGVwcy5sZW5ndGg7IGkrKykge1xuICAgICAgdmFyIF9zdGVwID0gdGhpcy5zdGVwc1tpXTtcblxuICAgICAgaWYgKF9zdGVwID09IHRoaXMuc3RlcHNbc3RlcF9pZF0pIHtcbiAgICAgICAgY29udGludWU7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuZGVhY3RpdmF0ZV9zdGVwKGkpO1xuICAgIH1cblxuICAgIHRoaXMuc3RlcHNbc3RlcF9pZF0uY2xhc3NMaXN0LmFkZCh0aGlzLm9wdGlvbnMuYWN0aXZlX2NsYXNzKTtcbiAgICBpZiAodHlwZW9mIHRoaXMuY29udGVudHNbc3RlcF9pZF0gIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICB0aGlzLmNvbnRlbnRzW3N0ZXBfaWRdLmNsYXNzTGlzdC5hZGQodGhpcy5vcHRpb25zLmFjdGl2ZV9jbGFzcyk7XG4gICAgfVxuXG4gICAgaWYgKHR5cGVvZiB0aGlzLm9wdGlvbnMub25TaG93ICE9ICd1bmRlZmluZWQnICYmIHRoaXMub3B0aW9ucy5vblNob3cgIT0gbnVsbCAmJiB0aGlzLm9wdGlvbnMub25TaG93KSB7XG4gICAgICB0aGlzLm9wdGlvbnMub25TaG93KHN0ZXBfaWQpO1xuICAgIH1cbiAgfVxuXG4gIGNvbXBsZXRlX3N0ZXAoc3RlcF9pZCkge1xuICAgIHRoaXMuc3RlcHNbc3RlcF9pZF0uY2xhc3NMaXN0LmFkZCh0aGlzLm9wdGlvbnMuY29tcGxldGVkX2NsYXNzKTtcbiAgfVxuXG4gIHVuY29tcGxldGVfc3RlcChzdGVwX2lkKSB7XG4gICAgdGhpcy5zdGVwc1tzdGVwX2lkXS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMub3B0aW9ucy5jb21wbGV0ZWRfY2xhc3MpO1xuICB9XG5cbiAgZGVhY3RpdmF0ZV9zdGVwKHN0ZXBfaWQpIHtcbiAgICB0aGlzLnN0ZXBzW3N0ZXBfaWRdLmNsYXNzTGlzdC5yZW1vdmUodGhpcy5vcHRpb25zLmFjdGl2ZV9jbGFzcyk7XG4gICAgaWYgKHR5cGVvZiB0aGlzLmNvbnRlbnRzW3N0ZXBfaWRdICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgdGhpcy5jb250ZW50c1tzdGVwX2lkXS5jbGFzc0xpc3QucmVtb3ZlKHRoaXMub3B0aW9ucy5hY3RpdmVfY2xhc3MpO1xuICAgIH1cbiAgfVxufVxuXG5kb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdET01Db250ZW50TG9hZGVkJywgZnVuY3Rpb24oKSB7XG4gIHZhciBzdGVwc0NvbnRhaW5lcnMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuc3RlcHMnKTtcbiAgW10uZm9yRWFjaC5jYWxsKHN0ZXBzQ29udGFpbmVycywgKHN0ZXBzQ29udGFpbmVyKSA9PiB7XG4gICAgdmFyIHN0ZXBzV2l6YXJkID0gbmV3IFN0ZXBzV2l6YXJkKHN0ZXBzQ29udGFpbmVyKTtcbiAgfSk7XG59KTtcbiJdfQ==